@mixin column-count ($number-columns) {
  -moz-column-count: $number-columns;
  -webkit-column-count: $number-columns;
  column-count: $number-columns;
}

@mixin column-gap ($column-gap-size) {
  -moz-column-gap: $column-gap-size;
  -webkit-column-gap: $column-gap-size;
  column-gap: $column-gap-size;
}

.content-card {
  @include media-query(palm) {
    padding: 0;

    &:not(:last-child) {
      border-bottom: 1px solid $border-color;
    }
  }

  &__thumbnail {
    width: 100%;
    height: $inuit-base-spacing-unit * 11;

    .grommetux-anchor & {
      @include media-query(lap-and-up) {
        height: 100%;
      }
    }
  }

  &__content {
    // truncate description paragraph after 8 lines
    .grommetux-paragraph {
      overflow: hidden;
      display: -webkit-box;
      -webkit-line-clamp: 8;
      -webkit-box-orient: vertical;
      max-height: 176px; // 22 * 8 (p line-height * # lines)
      text-overflow: ellipsis;
      position: relative;

      // fallback for -webkit-line-clamp
      &:after {
        content: '...';
        text-align: right;
        top: 0;
        right: 0;
        display: block;
        position: absolute;
        margin-top: 154px; // 22 * 7 (p line-height * (# lines - 1))
        background: linear-gradient(to right, transparent, $background-color 50%);
        width: $inuit-base-spacing-unit;
      }

      @supports(-webkit-line-clamp: 1) {
        &:after {
          display: none;
        }
      }

      @include media-query(palm) {
        -webkit-line-clamp: 4;
        max-height: 110px; // 22 * 5 (p line-height * # lines)

        &:after {
          margin-top: 88px; // 22 * 4 (p line-height * (# lines - 1))
        }
      }
    }
  }

  div:focus,
  a:focus {
    outline: none;
  }

  &--direction-horizontal {
    .content-card__thumbnail {
      height: auto;

      @include media-query(palm) {
        width: 100%;
        height: $inuit-base-spacing-unit * 11;
      }
    }

    .content-card__content {
      flex: 0 0 50%;
      min-width: $inuit-base-spacing-unit * 11;

      @include media-query(palm) {
        flex: 0 1 auto;
      }
    }
  }

  &--direction-vertical {
    min-width: $tile-large-size;

    // safari min-width flexbox hack
    _::-webkit-:not(:root:root),
    & {
      min-width: 0;
    }

    @include media-query(lap-and-up) {
      // flex-basis: $tile-large-size;
      flex: 0 0 33.3333%;
      max-width: $tile-large-size;
    }

    @include media-query(portable) {
      flex: 0 0 50%;
    }

    @include media-query(palm) {
      padding-left: 0px;
      padding-right: 0px;
      flex: 0 1 auto;
    }
  }

  &--selectable {
    &:hover > div {
      background-color: rgba(246, 246, 246, 1);
      color: $hover-text-color;
      cursor: pointer;

      .content-card__content {
        .grommetux-paragraph:after {
          background: linear-gradient(to right, transparent, rgba(246, 246, 246, 1) 50%);
        }
      }
    }
  }

  .masonry & {
    min-width: 0;
    flex: 0 1 auto;
  }
}

.masonry-columns {
  display: block;
  @include column-count(3);
  @incluide column-gap(0px);

  @include media-query (portable) {
    @include column-count(2);
  }

  @include media-query (palm) {
    @include column-count(1);
  }

  .content-card {
    display: inline-block;
    width: 100%;
    min-width: 0;
  }
}
